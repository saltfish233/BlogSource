var j=Object.defineProperty;var b=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var I=(t,o,a)=>o in t?j(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,z=(t,o)=>{for(var a in o||(o={}))C.call(o,a)&&I(t,a,o[a]);if(b)for(var a of b(o))M.call(o,a)&&I(t,a,o[a]);return t};var P=(t,o)=>{var a={};for(var s in t)C.call(t,s)&&o.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&b)for(var s of b(t))o.indexOf(s)<0&&M.call(t,s)&&(a[s]=t[s]);return a};import{_ as p}from"./index.84f6d6b5.js";import{G as S,b as A,y as T,O as K,z as U,A as D,C as W,E as V,H as F,t as G,J as N}from"./index.esm.d5841de8.js";import{k as L,j as X,a9 as q,o as Y,u as J,h as Q,r as u,R as e,n as m,l as i,aa as Z,X as e1,ab as t1,F as g,a2 as v,y as a1,s as E,q as k,C as n1,v as o1,b as H,L as B,E as r1,ac as s1}from"./vendor.dd75dc04.js";import{u as c1}from"./useTitle.2fc49172.js";function l1(t){return S({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M5.385 6.136c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-1.438 2.63c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465-2.63c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.499-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm-1.088 5.592c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.643 1.461 1.438 1.461zm5.464-5.592c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 7.247 12 7.247s1.088-.498 1.088-1.111zm.35-4.675c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461S11.206 0 12 0s1.438.654 1.438 1.461zm-.35 0C13.088.848 12.6.35 12 .35s-1.088.498-1.088 1.111S11.4 2.572 12 2.572s1.088-.498 1.088-1.111zm.35 8.806c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.499 1.088-1.111zm4.376-4.131c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939 1.461c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.644 1.461 1.438 1.461zm-4.027 1.209c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.643-1.461-1.438-1.461zm4.027 0c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 12.857a1.45 1.45 0 0 0-1.438 1.461c0 .807.644 1.461 1.438 1.461s1.438-.654 1.438-1.461a1.45 1.45 0 0 0-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zM12 12.896c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.464 1.461c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 16.948c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm4.376 0c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm.35 4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 23.65 12 23.65s1.088-.498 1.088-1.111zm4.376-4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461z"}}]})(t)}function i1(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.002 3h-14c-1.103 0-2 .897-2 2v4h2V5h14v14h-14v-4h-2v4c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V5c0-1.103-.898-2-2-2z"}},{tag:"path",attr:{d:"m11 16 5-4-5-4v3.001H3v2h8z"}}]})(t)}const m1=u.exports.lazy(()=>p(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./login.4c7053dc.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/login.4c7053dc.js","assets/vendor.dd75dc04.js","assets/index.esm.d5841de8.js","assets/index.esm.5483c5f7.css","assets/index.84f6d6b5.js"]))),O=u.exports.lazy(()=>p(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./settings.33dfb56d.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/settings.33dfb56d.js","assets/vendor.dd75dc04.js","assets/index.esm.d5841de8.js","assets/index.esm.5483c5f7.css","assets/index.84f6d6b5.js","assets/form-item.44207f5f.js"]))),u1=u.exports.lazy(()=>p(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./accounts.ba82dbc3.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/accounts.ba82dbc3.js","assets/vendor.dd75dc04.js","assets/index.esm.d5841de8.js","assets/index.esm.5483c5f7.css","assets/index.84f6d6b5.js","assets/form-item.44207f5f.js","assets/copy-clip.08e8f9de.js"]))),d1=u.exports.lazy(()=>p(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./metas.086f1061.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/metas.086f1061.js","assets/vendor.dd75dc04.js","assets/index.esm.d5841de8.js","assets/index.esm.5483c5f7.css","assets/index.84f6d6b5.js","assets/form-item.44207f5f.js"]))),R=[{name:"Settings",to:"settings",icon:V,children:[{name:"Frontend",to:"settings/0",component:O},{name:"Backend",to:"settings/1",component:O}]},{name:"Accounts",to:"accounts",icon:F,component:u1},{name:"Meta",to:"meta",icon:l1,component:d1},{name:"Backup & Restore",to:"backup-restore",icon:G,component:u.exports.lazy(()=>p(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./backup-restore.9cb31d7c.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/backup-restore.9cb31d7c.js","assets/vendor.dd75dc04.js","assets/index.esm.d5841de8.js","assets/index.esm.5483c5f7.css","assets/index.84f6d6b5.js"])))}],$=(t,o=[])=>(t.forEach(a=>{o.push(a),a.children&&$(a.children,o)}),o);function f1(){const t={};for(const r of R)r.children&&(t[r.name]=L());const o=L(),{t:a}=X(),s=q(),_=Y(),f=J(),w=Q();c1(a("Alist Manage")),u.exports.useEffect(()=>{const r=new URLSearchParams(f.search),n=r.get("code"),l=r.get("state");n&&n.length>0&&l&&l.length>0?A.post("oauth",{code:n,state:l}).then(h=>{const d=h.data;let c=s.url;c.endsWith("/")||(c=c+"/"),d.code===401?_.push(`${c}login`):(T(d.data,!1),s.url===f.pathname&&_.push(`${c}settings/0`))}):A.get("verify").then(h=>{const d=h.data;let c=s.url;c.endsWith("/")||(c=c+"/"),d.code===401?_.push(`${c}login`):s.url===f.pathname&&_.push(`${c}settings/0`)})},[f.pathname]);const y=r=>{const c=r,{icon:n,children:l}=c,h=P(c,["icon","children"]),d=r.to?B:m;return e.createElement(d,{to:`${s.url}/${r.to}`,onClick:()=>{r.to&&(document.title=`${l} - ${a("Alist Manage")}`,o.onClose())}},e.createElement(g,z({align:"center",px:"4",pl:"8",py:"3",cursor:"pointer",color:i("inherit","gray.400"),_hover:{bg:i("gray.100","gray.900"),color:i("gray.900","gray.200")},role:"group",fontWeight:"semibold",transition:".15s ease"},h),n&&e.createElement(E,{mr:"2",boxSize:"4",_groupHover:{color:i("gray.600","gray.300")},as:n}),l))},x=r=>e.createElement(m,z({as:"nav",pos:"fixed",top:"0",left:"0",zIndex:"sticky",h:"full",pb:"10",overflowX:"hidden",overflowY:"auto",bg:i("white","gray.800"),borderColor:i("inherit","gray.700"),borderRightWidth:"1px",w:"48",shadow:"md"},r),e.createElement(B,{to:"/@manage"},e.createElement(g,{px:"4",py:"5",align:"center"},e.createElement(r1,{fontSize:"2xl",ml:"2",color:i("brand.500","white"),fontWeight:"semibold"},"Alist ",a("Manage")))),e.createElement(g,{direction:"column",as:"nav",fontSize:"sm",color:"gray.600","aria-label":"Main Navigation"},R.map(n=>n.children?e.createElement(m,{key:n.name},e.createElement(y,{icon:n.icon,onClick:t[n.name].onToggle},a(n.name),e.createElement(E,{as:N,ml:"auto",transform:t[n.name].isOpen?"rotate(90deg)":""})),e.createElement(s1,{in:t[n.name].isOpen},n.children.map(l=>e.createElement(y,{pl:"12",py:"2",to:l.to,icon:l.icon,key:l.name},a(l.name))))):e.createElement(y,{to:n.to,icon:n.icon,key:n.name},a(n.name)))));return e.createElement(m,{as:"section",bg:i("gray.50","gray.700"),minH:"100vh"},e.createElement(K,null),e.createElement(x,{display:{base:"none",md:"unset"}}),e.createElement(Z,{isOpen:o.isOpen,onClose:o.onClose,placement:"left"},e.createElement(e1,null),e.createElement(t1,null,e.createElement(x,{w:"full",borderRight:"none"}))),e.createElement(m,{ml:{base:0,md:48},transition:".3s ease"},e.createElement(g,{as:"header",align:"center",justify:"space-between",w:"full",px:"4",bg:i("white","gray.800"),borderBottomWidth:"1px",borderColor:i("inherit","gray.700"),h:"14",shadow:"md"},e.createElement(v,{"aria-label":"Menu",display:{base:"inline-flex",md:"none"},onClick:o.onOpen,icon:e.createElement(U,null),size:"sm"}),e.createElement(m,{w:"96",display:{base:"none",md:"flex"}}),e.createElement(g,{align:"center"},e.createElement(a1,{href:"https://github.com/Xhofe/alist",isExternal:!0},e.createElement(E,{boxSize:6,color:"gray.500",as:D,cursor:"pointer"})),e.createElement(k,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:a("clear buffer")},e.createElement(v,{colorScheme:"whiteAlpha","aria-label":a("clear buffer"),icon:e.createElement(E,{boxSize:6,color:"gray.500",as:W}),onClick:()=>{A.get("clear_cache").then(r=>{const n=r.data;n.code===200?w({title:a(n.message),status:"success",duration:3e3,isClosable:!0}):w({title:a(n.message),status:"error",duration:3e3,isClosable:!0})})}})),e.createElement(k,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:a("logout")},e.createElement(v,{onClick:()=>{T("",!1),_.push(`${s.url}/login`)},colorScheme:"blank","aria-label":a("logout"),icon:e.createElement(E,{boxSize:6,color:"gray.500",as:i1})})))),e.createElement(m,{as:"main",p:"2"},e.createElement(m,{borderWidth:"1px",borderStyle:"dashed",rounded:"md",h:"calc( 100vh - 80px)",overflowY:"auto",p:"2"},e.createElement(u.exports.Suspense,{fallback:e.createElement(n1,{h:"full"},e.createElement(o1,null))},$(R).map(r=>r.component&&e.createElement(H,{path:`${s.url}/${r.to}`,key:r.name},e.createElement(r.component,null))),e.createElement(H,{path:`${s.url}/login`},e.createElement(m1,null)))))))}export{f1 as default};
